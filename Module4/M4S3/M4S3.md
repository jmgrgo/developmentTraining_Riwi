## insert One:

### Users (screenshot01):

db.users.insertOne({
  _id: "user001",
  name: "Ana Martinez",
  email: "ana.martinez@gmail.com",
  country: "Mexico",
  preferred_genres: ["Drama", "Thriller", "Documentary"],
  viewing_history: [
    {
      content_id: "mov001",
      viewed_at: new Date("2025-08-01T21:15:00Z"),
    },
  ]
});

### Contents (screenshot02):
db.contents.insertOne({
  _id: "mov001",
  title: "The Silence of Water",
  type: "movie",
  duration: 108,
  release_year: 2022,
  genres: ["Drama", "Mystery"],
  main_cast: ["Irene Azuela", "Luis Gerardo Mendez"],
  description: "A family faces hidden secrets during a remote lakeside vacation.",
  ratings: [
    {
      user_id: "user001",
      score: 5,
      review: "Well-acted with a powerful ending.",
      date: new Date("2025-08-01T22:05:00Z")
    }
  ]
});


### Playlists (screenshot03):
db.playlists.insertOne({
  _id: "pl001",
  user_id: "user001",
  name: "My Favorites",
  created_at: new Date("2025-07-28T18:00:00Z"),
  content_ids: ["mov001"]
});

### Interactions (screenshot04):
db.interactions.insertOne({
  _id: "int001",
  user_id: "user001",
  content_id: "mov001",
  interaction_type: "comment",
  comment: "That was one of the best dramas I've seen this year!",
  date: new Date("2025-08-01T22:10:00Z")
});

## insertMany:<>

### Users (screenshot05):
db.users.insertMany([
  {
    _id: "user002",
    name: "Carlos Rivera",
    email: "carlos.rivera@example.com",
    country: "Spain",
    preferred_genres: ["Comedy", "Action"],
    viewing_history: [
      {
        content_id: "mov002",
        viewed_at: new Date("2025-08-02T20:30:00Z"),
      },
      {
        content_id: "mov003",
        viewed_at: new Date("2025-08-04T19:45:00Z"),
      }
    ]
  },
  {
    _id: "user003",
    name: "Emily Johnson",
    email: "emily.johnson@example.com",
    country: "USA",
    preferred_genres: ["Documentary", "Drama"],
    viewing_history: [
      {
        content_id: "mov001",
        viewed_at: new Date("2025-08-03T18:00:00Z"),
      }
    ]
  }
]);

### Contents (screenshot06): 
db.contents.insertMany([
  {
    _id: "mov002",
    title: "Laugh Till You Drop",
    type: "movie",
    duration: 95,
    release_year: 2023,
    genres: ["Comedy"],
    main_cast: ["John Doe", "Jane Smith"],
    description: "A hilarious road trip adventure full of unexpected mishaps.",
    ratings: [
      {
        user_id: "user002",
        score: 4,
        review: "Really funny and light-hearted!",
        date: new Date("2025-08-02T21:00:00Z")
      }
    ]
  },
  {
    _id: "mov003",
    title: "Battlefield Courage",
    type: "movie",
    duration: 120,
    release_year: 2024,
    genres: ["Action", "Drama"],
    main_cast: ["Mark Strong", "Lucy Liu"],
    description: "A soldier's journey through war and peace.",
    ratings: []
  }
]);

### Playlists (screenshot07):
db.playlists.insertMany([
  {
    _id: "pl002",
    user_id: "user002",
    name: "Weekend Laughs",
    created_at: new Date("2025-08-01T15:00:00Z"),
    content_ids: ["mov002"]
  },
  {
    _id: "pl003",
    user_id: "user003",
    name: "Serious Documentaries",
    created_at: new Date("2025-08-02T17:30:00Z"),
    content_ids: ["mov001"]
  }
]);

### Interactions (screenshot08):
db.interactions.insertMany([
  {
    _id: "int002",
    user_id: "user002",
    content_id: "mov002",
    interaction_type: "comment",
    comment: "Had me laughing from start to finish!",
    date: new Date("2025-08-02T21:10:00Z")
  },
  {
    _id: "int003",
    user_id: "user003",
    content_id: "mov001",
    interaction_type: "like",
    date: new Date("2025-08-03T18:30:00Z")
  }
]);

## find() Queries:

### Find users from MÃ©xico (screenshot09):
db.users.find({
  country: "Mexico"
  });

### Find contents with the "Drama" genre (screenshot10):
db.contents.find({
  genres: "Drama"
  });

### Find comments made by a specific user (user002) (screenshot11):
db.interactions.find({
  user_id: "user002",
  interaction_type: "comment"}
);

## updateOne Operations:

### Update the email address of an user (user001) (screenshot012):
db.users.updateOne({
    _id: "user001"
  },
  {
    $set: {
      email: "ana.newemail@example.com"
      }
  }
);

### Add a new preferred genre to an user (user002) (screenshot13):
db.users.updateOne({
    _id: "user002"
    },
  {
    $addToSet: {
      preferred_genres: "Sci-Fi"
      }
    }
);

## deleteOne Operations:

### Delete a playlist (screenshot14):
db.playlists.deleteOne({
  _id: "pl002"
  });

### Delete an interaction (screenshot15):
db.interactions.deleteOne({
    _id: "int003"
  });

## Create indexes:

### Index on the email field (screenshot16):
db.users.createIndex({
  email: 1
  });

### Compound index on country and preferred_genres (screenshot17):
db.users.createIndex({
  country: 1,
  preferred_genres: 1
  });

### View all indexes (screenshot18):
db.users.getIndexes();

## Aggregation Queries:

### Count users by country (screenshot19):
db.users.aggregate([
  {
    $group: {
      _id: "$country",
      total_users: {
        $sum: 1
        }
    }
  },
  {
    $sort: {
    total_users: -1 }
    }
]);


### Get rating average by content (screenshot20):
db.contents.aggregate([
  {
    $unwind: "$ratings"
  },
  {
    $group: {
      _id: "$_id",
      title: {
        $first: "$title"
        },
      average_score: {
        $avg: "$ratings.score"
        },
      total_ratings: {
        $sum: 1
        }
    }
  },
  {
    $sort: {
    average_score: -1
      }
    }
]);


